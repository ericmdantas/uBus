"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),Bus=exports.Bus=function(){function e(){_classCallCheck(this,e),this._q=[]}return _createClass(e,[{key:"emit",value:function(e,n){if(!e)throw new TypeError(this._invalidTokenMessage("emit"));for(var t=0,o=this._q.length;t<o;t++)if(this._q[t].token===e&&(this._q[t].cb(n),this._q[t].once)){this._q.splice(t,1);break}}},{key:"on",value:function(e,n){var t=this;if(!e)throw new TypeError(this._invalidTokenMessage("on"));var o=this._genId();return this._q.push({_id:o,token:e,cb:n,once:!1,del:!1}),function(){for(var e=0,n=t._q.length;e<n;e++)if(t._q[e]._id===o){t._q.splice(e,1);break}}}},{key:"once",value:function(e,n){if(!e)throw new TypeError(this._invalidTokenMessage("once"));this._q.push({_id:this._genId(),token:e,cb:n,once:!0,del:!1})}},{key:"off",value:function(){for(var e=this,n=arguments.length,t=Array(n),o=0;o<n;o++)t[o]=arguments[o];"object"===(void 0===t?"undefined":_typeof(t))&&t.length&&t.forEach(function(n){for(var t=0,o=e._q.length;t<o;t++)e._q[t].token===n&&(e._q[t].del=!0)}),this._q=this._q.filter(function(e){return!e.del})}},{key:"_invalidTokenMessage",value:function(e){return"["+e+"] - Token not informed."}},{key:"_genId",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"==e?n:3&n|8).toString(16)})}}]),e}();